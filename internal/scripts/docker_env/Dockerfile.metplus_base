# Dockerfile to create conda environment used for use cases
# that don't require any additional packages

ARG METPLUS_ENV_VERSION=v5.1
FROM dtcenter/metplus-envs:conda.${METPLUS_ENV_VERSION}

ENV PATH=$PATH:/usr/local/conda/bin

WORKDIR /scripts
COPY scripts/metplus_base_env.sh .

RUN conda update -y -n base -c conda-forge conda \
 && ./metplus_base_env.sh

ARG METPLUS_ENV_VERSION=v5.1
RUN conda list --name metplus_base.${METPLUS_ENV_VERSION} > /usr/local/conda/envs/metplus_base.${METPLUS_ENV_VERSION}/environments.yml
