[config]

PROCESS_LIST = SeriesAnalysis, GenEnsProd, SeriesAnalysis(run_two), GridStat

###
# Time Info
###

LOOP_BY = INIT
INIT_TIME_FMT = %Y%m
INIT_BEG=198201
INIT_END=201002
INIT_INCREMENT = 1Y

LEAD_SEQ = 

LOOP_ORDER = processes

###
# SERIES_ANALYSIS FIELDINFO
###

SERIES_ANALYSIS_RUNTIME_FREQ = RUN_ONCE 
MODEL = CFSv2
SERIES_ANALYSIS_CUSTOM_LOOP_LIST = 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23

BOTH_SERIES_ANALYSIS_VAR1_NAME = fcst
BOTH_SERIES_ANALYSIS_VAR1_LEVELS = "({custom},0,*,*)"
SERIES_ANALYSIS_FCST_FILE_TYPE = NETCDF_NCCF
SERIES_ANALYSIS_OBS_FILE_TYPE = NETCDF_NCCF
SERIES_ANALYSIS_OUTPUT_STATS_CNT = TOTAL, FBAR, FSTDEV
SERIES_ANALYSIS_BLOCK_SIZE = 0

###
# File I/O SERIES_ANALYSIS
###

FCST_SERIES_ANALYSIS_INPUT_DIR = {INPUT_BASE}/model_applications/s2s/SeriesAnalysis_fcstCFSv2_obsGHCNCAMS_climoStandardized_MultiStatisticTool
FCST_SERIES_ANALYSIS_INPUT_TEMPLATE = CFSv2.tmp2m.{init?fmt=%Y%m}.fcst.nc

OBS_SERIES_ANALYSIS_INPUT_DIR = {FCST_SERIES_ANALYSIS_INPUT_DIR}
OBS_SERIES_ANALYSIS_INPUT_TEMPLATE = {FCST_SERIES_ANALYSIS_INPUT_TEMPLATE}

SERIES_ANALYSIS_OUTPUT_DIR = {OUTPUT_BASE}/SA_run1
SERIES_ANALYSIS_OUTPUT_TEMPLATE = mem{custom?fmt=%s}_output.nc

###
# File I/O Gen_Ens_Prod
###

GEN_ENS_PROD_INPUT_DIR = {FCST_SERIES_ANALYSIS_INPUT_DIR}

GEN_ENS_PROD_INPUT_TEMPLATE = {FCST_SERIES_ANALYSIS_INPUT_TEMPLATE}

#GEN_ENS_PROD_CTRL_INPUT_DIR = 
#GEN_ENS_PROD_CTRL_INPUT_TEMPLATE = 

GEN_ENS_PROD_N_MEMBERS = 24

GEN_ENS_PROD_OUTPUT_DIR = {OUTPUT_BASE}/GEP
GEN_ENS_PROD_OUTPUT_TEMPLATE = gen_ens_prod_{init?fmt=%Y%m}_ens.nc

###
# Field Info
###

ENS_VAR1_NAME = fcst
ENS_VAR1_LEVELS = "(MET_ENS_MEMBER_ID,0,*,*)"
ENS_VAR1_THRESH = <-0.43, >=-0.43&&<=0.43, >0.43
ENS_FILE_TYPE = NETCDF_NCCF

###
# GenEnsProd
###

#LOG_GEN_ENS_PROD_VERBOSITY = 2

MODEL = CFSv2
# GEN_ENS_PROD_DESC = NA

#GEN_ENS_PROD_REGRID_TO_GRID = NONE
#GEN_ENS_PROD_REGRID_METHOD = NEAREST
#GEN_ENS_PROD_REGRID_WIDTH = 1
#GEN_ENS_PROD_REGRID_VLD_THRESH = 0.5
#GEN_ENS_PROD_REGRID_SHAPE = SQUARE

#GEN_ENS_PROD_CENSOR_THRESH =
#GEN_ENS_PROD_CENSOR_VAL =
GEN_ENS_PROD_NORMALIZE = CLIMO_STD_ANOM
#GEN_ENS_PROD_CAT_THRESH =
#GEN_ENS_PROD_NC_VAR_STR =

GEN_ENS_PROD_ENS_THRESH = 0.3
GEN_ENS_PROD_VLD_THRESH = 0.3

#GEN_ENS_PROD_NBRHD_PROB_WIDTH = 5
#GEN_ENS_PROD_NBRHD_PROB_SHAPE = CIRCLE
#GEN_ENS_PROD_NBRHD_PROB_VLD_THRESH = 0.0

#GEN_ENS_PROD_NMEP_SMOOTH_VLD_THRESH = 0.0
#GEN_ENS_PROD_NMEP_SMOOTH_SHAPE = CIRCLE
#GEN_ENS_PROD_NMEP_SMOOTH_GAUSSIAN_DX = 81.27
#GEN_ENS_PROD_NMEP_SMOOTH_GAUSSIAN_RADIUS = 120
#GEN_ENS_PROD_NMEP_SMOOTH_METHOD = GAUSSIAN
#GEN_ENS_PROD_NMEP_SMOOTH_WIDTH = 1

GEN_ENS_PROD_CLIMO_MEAN_FILE_NAME = {SERIES_ANALYSIS_OUTPUT_DIR}/memMET_ENS_MEMBER_ID_output.nc
GEN_ENS_PROD_CLIMO_MEAN_FIELD = {name="series_cnt_FBAR"; level="(*,*)";}
#GEN_ENS_PROD_CLIMO_MEAN_REGRID_METHOD =
#GEN_ENS_PROD_CLIMO_MEAN_REGRID_WIDTH =
#GEN_ENS_PROD_CLIMO_MEAN_REGRID_VLD_THRESH =
#GEN_ENS_PROD_CLIMO_MEAN_REGRID_SHAPE =
#GEN_ENS_PROD_CLIMO_MEAN_TIME_INTERP_METHOD =
#GEN_ENS_PROD_CLIMO_MEAN_MATCH_MONTH =
#GEN_ENS_PROD_CLIMO_MEAN_DAY_INTERVAL = 31
#GEN_ENS_PROD_CLIMO_MEAN_HOUR_INTERVAL = 6

GEN_ENS_PROD_CLIMO_STDEV_FILE_NAME = {SERIES_ANALYSIS_OUTPUT_DIR}/memMET_ENS_MEMBER_ID_output.nc
GEN_ENS_PROD_CLIMO_STDEV_FIELD = {name="series_cnt_FSTDEV"; level="(*,*)";}
#GEN_ENS_PROD_CLIMO_STDEV_REGRID_METHOD =
#GEN_ENS_PROD_CLIMO_STDEV_REGRID_WIDTH =
#GEN_ENS_PROD_CLIMO_STDEV_REGRID_VLD_THRESH =
#GEN_ENS_PROD_CLIMO_STDEV_REGRID_SHAPE =
#GEN_ENS_PROD_CLIMO_STDEV_TIME_INTERP_METHOD =
#GEN_ENS_PROD_CLIMO_STDEV_MATCH_MONTH =
#GEN_ENS_PROD_CLIMO_STDEV_DAY_INTERVAL = 31
#GEN_ENS_PROD_CLIMO_STDEV_HOUR_INTERVAL = 6

GEN_ENS_PROD_ENSEMBLE_FLAG_LATLON = TRUE
GEN_ENS_PROD_ENSEMBLE_FLAG_MEAN = TRUE
GEN_ENS_PROD_ENSEMBLE_FLAG_STDEV = TRUE
#GEN_ENS_PROD_ENSEMBLE_FLAG_MINUS = TRUE
#GEN_ENS_PROD_ENSEMBLE_FLAG_PLUS = TRUE
#GEN_ENS_PROD_ENSEMBLE_FLAG_MIN = TRUE
#GEN_ENS_PROD_ENSEMBLE_FLAG_MAX = TRUE
#GEN_ENS_PROD_ENSEMBLE_FLAG_RANGE = TRUE
#GEN_ENS_PROD_ENSEMBLE_FLAG_VLD_COUNT = TRUE
GEN_ENS_PROD_ENSEMBLE_FLAG_FREQUENCY = TRUE
#GEN_ENS_PROD_ENSEMBLE_FLAG_NEP = FALSE
#GEN_ENS_PROD_ENSEMBLE_FLAG_NMEP = FALSE
#GEN_ENS_PROD_ENSEMBLE_FLAG_CLIMO = FALSE
#GEN_ENS_PROD_ENSEMBLE_FLAG_CLIMO_CDF = FALSE

GEN_ENS_PROD_ENS_MEMBER_IDS = 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23
#GEN_ENS_PROD_CONTROL_ID =

###
# File I/O Grid_Stat
###

FCST_GRID_STAT_INPUT_DIR = {GEN_ENS_PROD_OUTPUT_DIR}
FCST_GRID_STAT_INPUT_TEMPLATE = {GEN_ENS_PROD_OUTPUT_TEMPLATE}

OBS_GRID_STAT_INPUT_DIR = {INPUT_BASE}/model_applications/s2s/SeriesAnalysis_fcstCFSv2_obsGHCNCAMS_climoStandardized_MultiStatisticTool
OBS_GRID_STAT_INPUT_TEMPLATE = ghcn_cams.1x1.1982-2020.mon.nc

GRID_STAT_OUTPUT_DIR = {OUTPUT_BASE}/GridStat
GRID_STAT_OUTPUT_TEMPLATE = {init?fmt=%Y%m}
GRID_STAT_OUTPUT_PREFIX = {init?fmt=%Y%m}


###
# Field Info GridStat
###

FCST_GRID_STAT_VAR1_NAME = fcst_0_0_all_all_ENS_FREQ_lt-0.43
FCST_GRID_STAT_VAR1_LEVELS = "(*,*)"
FCST_GRID_STAT_VAR1_THRESH = ==0.1
FCST_GRID_STAT_IS_PROB = True

OBS_GRID_STAT_VAR1_NAME = tmp2m
OBS_GRID_STAT_VAR1_LEVELS = "({init?fmt=%Y%m%d_%H%M%S},*,*)"
OBS_GRID_STAT_VAR1_THRESH = <=CDP33
OBS_GRID_STAT_FILE_TYPE = NETCDF_NCCF


###
# Field Info for GridStat
###

GRID_STAT_CLIMO_MEAN_FILE_NAME = {INPUT_BASE}/model_applications/s2s/SeriesAnalysis_fcstCFSv2_obsGHCNCAMS_climoStandardized_MultiStatisticTool/ghcn_cams.1x1.1982-2010.mon.clim.nc
GRID_STAT_CLIMO_MEAN_FIELD = {name="clim"; level="(0,*,*)";}
GRID_STAT_CLIMO_MEAN_FILE_TYPE = NETCDF_NCCF


GRID_STAT_CLIMO_STDEV_FILE_NAME = {INPUT_BASE}/model_applications/s2s/SeriesAnalysis_fcstCFSv2_obsGHCNCAMS_climoStandardized_MultiStatisticTool/ghcn_cams.1x1.1982-2010.mon.stddev.nc
GRID_STAT_CLIMO_STDEV_FIELD = {name="stddev"; level="(0,*,*)";}
GRID_STAT_CLIMO_STDEV_FILE_TYPE = NETCDF_NCCF

GRID_STAT_REGRID_TO_GRID = FCST
GRID_STAT_OUTPUT_FLAG_PSTD = BOTH
GRID_STAT_NC_PAIRS_FLAG_APPLY_MASK = TRUE
GRID_STAT_NC_PAIRS_FLAG_RAW = TRUE

[run_two]
###
# FILE I/O of SeriesAnalysis run_two
###

FCST_SERIES_ANALYSIS_INPUT_DIR = {OUTPUT_BASE}/GEP
FCST_SERIES_ANALYSIS_INPUT_TEMPLATE = gen_ens_prod_{init?fmt=%Y%m}_ens.nc

OBS_SERIES_ANALYSIS_INPUT_DIR = {INPUT_BASE}/model_applications/s2s/SeriesAnalysis_fcstCFSv2_obsGHCNCAMS_climoStandardized_MultiStatisticTool
OBS_SERIES_ANALYSIS_INPUT_TEMPLATE = ghcn_cams.1x1.1982-2020.mon.nc

SERIES_ANALYSIS_OUTPUT_DIR = {OUTPUT_BASE}/SA_run2
SERIES_ANALYSIS_OUTPUT_TEMPLATE = {INIT_BEG}to{INIT_END}_CFSv2_SA.nc

###
# Field Info for SeriesAnalysis run_two
###
#
#These first entries are empty to override the intial SeriesAnalysis call
#SERIES_ANALYSIS_CUSTOM_LOOP_LIST =

#BOTH_SERIES_ANALYSIS_VAR1_NAME =
#BOTH_SERIES_ANALYSIS_VAR1_LEVELS =

FCST_SERIES_ANALYSIS_VAR1_NAME = fcst_0_0_all_all_ENS_FREQ_lt-0.43
FCST_SERIES_ANALYSIS_VAR1_LEVELS = "(*,*)"

FCST_CAT_THRESH = ==0.1
FCST_IS_PROB = True

OBS_SERIES_ANALYSIS_VAR1_NAME = tmp2m
OBS_SERIES_ANALYSIS_VAR1_LEVELS = "({init?fmt=%Y%m%d_%H%M%S},*,*)"
OBS_SERIES_ANALYSIS_CAT_THRESH = <=CDP33

OBS_FILE_TYPE = NETCDF_NCCF

###
# SeriesAnalysis General for run_two
###

SERIES_ANALYSIS_REGRID_TO_GRID = FCST
SERIES_ANALYSIS_OUTPUT_STATS_PSTD = TOTAL, BRIER, RELIABILITY, BRIERCL, BSS
SERIES_ANALYSIS_VLD_THRESH = 0.5

SERIES_ANALYSIS_BLOCK_SIZE = 0

SERIES_ANALYSIS_CLIMO_MEAN_FILE_NAME = {INPUT_BASE}/model_applications/s2s/SeriesAnalysis_fcstCFSv2_obsGHCNCAMS_climoStandardized_MultiStatisticTool/ghcn_cams.1x1.1982-2010.mon.clim.nc
SERIES_ANALYSIS_CLIMO_MEAN_FIELD = {name="clim"; level="(0,*,*)";}
SERIES_ANALYSIS_CLIMO_MEAN_FILE_TYPE = NETCDF_NCCF


SERIES_ANALYSIS_CLIMO_STDEV_FILE_NAME = {INPUT_BASE}/model_applications/s2s/SeriesAnalysis_fcstCFSv2_obsGHCNCAMS_climoStandardized_MultiStatisticTool/ghcn_cams.1x1.1982-2010.mon.stddev.nc
SERIES_ANALYSIS_CLIMO_STDEV_FIELD = {name="stddev"; level="(0,*,*)";}
SERIES_ANALYSIS_CLIMO_STDEV_FILE_TYPE = NETCDF_NCCF
SERIES_ANALYSIS_RUNTIME_FREQ = RUN_ONCE

SERIES_ANALYSIS_RUN_ONCE_PER_STORM_ID = False
